{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"compiled-js.js","sourcesContent":["const API_URL = './videos.json';\r\n\r\nconst moviedisplayer = (() => {\r\n  let videoscontainer;\r\n\r\n\r\n  /*\r\n    Býr til streng á formi m:ss úr lengd\r\n    myndbands\r\n  */\r\n  function getLength(length) {\r\n    const min = Math.floor(length / 60);\r\n    const secs = length - (60 * min);\r\n    const secsstring = secs < 10 ? `0${secs}` : secs;\r\n\r\n    const durationString = `${min}:${secsstring}`;\r\n\r\n    return durationString;\r\n  }\r\n\r\n  /*\r\n    Býr til streng á forminu\r\n    'Fyrir N (degi|vikum) síðan'\r\n  */\r\n  function getDurationSinceCreated(date) {\r\n    const timeSince = Date.now() - date;\r\n\r\n    const hoursSince = Math.floor(timeSince / (1000 * 60 * 60));\r\n\r\n    if (hoursSince === 1) {\r\n      return `Fyrir ${hoursSince} klukkustund síðan`;\r\n    }\r\n    if (hoursSince < 24) {\r\n      return `Fyrir ${hoursSince} klukkustundum síðan`;\r\n    }\r\n\r\n    const daysSince = Math.floor(timeSince / (1000 * 60 * 60 * 24));\r\n\r\n    if (daysSince === 1) {\r\n      return `Fyrir ${daysSince} degi síðan`;\r\n    }\r\n    if (daysSince < 7) {\r\n      return `Fyrir ${daysSince} dögum síðan`;\r\n    }\r\n\r\n    const weeksSince = Math.floor(daysSince / 7);\r\n    if (weeksSince === 1) {\r\n      return `Fyrir ${weeksSince} viku síðan`;\r\n    }\r\n    if (daysSince < 30) {\r\n      return `Fyrir ${weeksSince} vikum síðan`;\r\n    }\r\n\r\n    const monthsSince = Math.floor(daysSince / 30);\r\n    if (monthsSince === 1) {\r\n      return `Fyrir ${monthsSince} mánuði síðan`;\r\n    }\r\n    if (daysSince < 365) {\r\n      return `Fyrir ${monthsSince} mánuðum síðan`;\r\n    }\r\n\r\n    const yearsSince = Math.floor(daysSince / 365);\r\n    if (yearsSince === 1) {\r\n      return `Fyrir ${yearsSince} ári síðan`;\r\n    }\r\n    return `Fyrir ${yearsSince} árum síðan`;\r\n  }\r\n\r\n  /*\r\n    Setur eventListener \"click\" á element, beinir vafra á síðu\r\n    með mynbandi sem valið er\r\n  */\r\n  function addVideoLink(element, videoid) {\r\n    element.addEventListener('click', () => {\r\n      window.location = `./watch.html?id=${videoid}`;\r\n    });\r\n  }\r\n\r\n  /*\r\n    Setur upp HTML fyrir video.\r\n  */\r\n  function makeVideoListItem(videoInfo) {\r\n    /* Bý til element */\r\n    const container = document.createElement('div');\r\n    const imgcontainer = document.createElement('div');\r\n    const img = document.createElement('img');\r\n    const lengthlabel = document.createElement('span');\r\n    const title = document.createElement('h3');\r\n    const date = document.createElement('p');\r\n\r\n    /* Set klasa á element */\r\n    container.className = 'video';\r\n    imgcontainer.className = 'video__imgcontainer';\r\n    img.className = 'video__img';\r\n    lengthlabel.className = 'video__imglabel';\r\n    title.className = 'video__title';\r\n    date.className = 'video__date';\r\n\r\n    /* Set content í element */\r\n    img.src = videoInfo.poster;\r\n    lengthlabel.textContent = getLength(videoInfo.duration);\r\n    title.textContent = videoInfo.title;\r\n    date.textContent = getDurationSinceCreated(videoInfo.created);\r\n    addVideoLink(imgcontainer, videoInfo.id);\r\n\r\n    /* Set í viðeigandi container */\r\n    imgcontainer.appendChild(img);\r\n    imgcontainer.appendChild(lengthlabel);\r\n    container.appendChild(imgcontainer);\r\n    container.appendChild(title);\r\n    container.appendChild(date);\r\n\r\n    return container;\r\n  }\r\n\r\n  /*\r\n    Bætir við myndböndum í viðeigandi category.\r\n    */\r\n  function addVideosToCategory(container, videosInCategory, allVideos) {\r\n    allVideos.forEach((video) => {\r\n      if (videosInCategory.includes(video.id)) {\r\n        container.appendChild(makeVideoListItem(video));\r\n      }\r\n    });\r\n  }\r\n\r\n  /*\r\n    Býr til container fyrir category.\r\n  */\r\n  function buildContainer(title) {\r\n    const container = document.createElement('div');\r\n    const heading = document.createElement('h2');\r\n    const videolistitemcontainer = document.createElement('div');\r\n    const hr = document.createElement('hr');\r\n    hr.classList.add('hr');\r\n\r\n    container.className = 'category';\r\n    heading.className = 'category__heading';\r\n    videolistitemcontainer.className = 'category__videolist';\r\n    heading.textContent = title;\r\n\r\n    container.appendChild(heading);\r\n    container.appendChild(videolistitemcontainer);\r\n    videoscontainer.appendChild(container);\r\n    videoscontainer.appendChild(hr);\r\n\r\n    return videolistitemcontainer;\r\n  }\r\n\r\n  /*\r\n    Fall sem vinnur úr niðurstöðum úr AJAX request og sýnir\r\n    á skjá.\r\n  */\r\n  function displayData(results) {\r\n    results.categories.forEach((data) => {\r\n      const container = buildContainer(data.title);\r\n      addVideosToCategory(container, data.videos, results.videos);\r\n    });\r\n  }\r\n\r\n  /*\r\n    Fall til að sýna error skilaboð\r\n  */\r\n  function showError(error) {\r\n    const el = document.createElement('p');\r\n    el.appendChild(document.createTextNode(error));\r\n    el.classList.add('error');\r\n    videoscontainer.appendChild(el);\r\n  }\r\n\r\n  function empty() {\r\n    videoscontainer.removeChild(videoscontainer.children[1]);\r\n  }\r\n\r\n  function showLoading() {\r\n    const el = document.createElement('p');\r\n    el.appendChild(document.createTextNode('Verið að hlaða gögnum'));\r\n    el.classList.add('loading');\r\n    videoscontainer.appendChild(el);\r\n  }\r\n\r\n  /*\r\n    Framkvæmir AJAX fyrirspurn og kallar á fall sem\r\n    sýnir niðurstöður\r\n  */\r\n  function fetchData() {\r\n    const r = new XMLHttpRequest();\r\n    showLoading();\r\n    /* Set upp beiðni */\r\n    r.open('GET', API_URL, true);\r\n\r\n\r\n    r.onload = () => {\r\n      empty();\r\n      if (r.status >= 200 && r.status < 400) {\r\n        const results = JSON.parse(r.response);\r\n        displayData(results);\r\n      } else {\r\n        showError(`Villa kom upp: ${r.error}`);\r\n      }\r\n    };\r\n\r\n    r.onerror = () => {\r\n      empty();\r\n      showError('Gat ekki hlaðið gögnum');\r\n    };\r\n\r\n    r.send();\r\n  }\r\n\r\n\r\n  /*\r\n    Keyrslufall síðu.\r\n    Setur allt af stað.\r\n  */\r\n  function init() {\r\n    videoscontainer = document.querySelector('main .myndbond');\r\n    fetchData();\r\n  }\r\n\r\n\r\n  return {\r\n    init,\r\n  };\r\n})();\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  moviedisplayer.init();\r\n});\r\n"]}