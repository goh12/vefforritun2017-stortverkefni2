{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"compiled-js.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n    moviedisplayer.init();\r\n});\r\n\r\n\r\nvar moviedisplayer = (function() {\r\n    var videoscontainer;\r\n\r\n    /*\r\n        Framkvæmir AJAX fyrirspurn og kallar á fall sem\r\n        sýnir niðurstöður\r\n    */\r\n    function fetchData() {\r\n        var r = new XMLHttpRequest();\r\n        //Set upp beiðni\r\n        r.open('GET', './videos.json', true);\r\n\r\n        r.onload = function() {\r\n            if(r.status == 200) {\r\n            var results = JSON.parse(r.response);\r\n            displayData(results);\r\n            } else if (r.status >= 400) {\r\n            }\r\n        }\r\n\r\n        r.onerror = function() {\r\n            console.log('Óþekkt villa');\r\n        }\r\n\r\n        r.send();\r\n    }\r\n\r\n    /*\r\n        Fall sem vinnur úr niðurstöðum úr AJAX request og sýnir\r\n        á skjá.\r\n    */\r\n    function displayData(results) {\r\n        console.log(results.categories);\r\n        results.categories.forEach(function(data) {\r\n            const container = buildContainer(data.title);\r\n            console.log(data.title);\r\n            addVideosToCategory(container, data.videos, results.videos);\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n        Býr til container fyrir category.\r\n    */\r\n    function buildContainer(title) {\r\n        const container = document.createElement('div');\r\n        const heading = document.createElement('h2');\r\n        const videolistitemcontainer = document.createElement('div');\r\n        const hr = document.createElement('hr');\r\n\r\n        container.className = 'category';\r\n        heading.className = 'category__heading';\r\n        videolistitemcontainer.className = 'category__videolist';\r\n        heading.textContent = title;\r\n\r\n        container.appendChild(heading);\r\n        container.appendChild(videolistitemcontainer);\r\n        videoscontainer.appendChild(container);\r\n        videoscontainer.appendChild(hr);\r\n\r\n        return videolistitemcontainer;\r\n    }\r\n\r\n    /*\r\n        Bætir við myndböndum í viðeigandi category.\r\n    */\r\n    function addVideosToCategory(container, videosInCategory, allVideos) {\r\n        allVideos.forEach(function(video) {\r\n            if (videosInCategory.includes(video.id)) {\r\n                container.appendChild(makeVideoListItem(video));\r\n            }\r\n        });\r\n    }\r\n\r\n    /*\r\n        Setur upp HTML fyrir video.\r\n    */\r\n    function makeVideoListItem(videoInfo) {\r\n        //Bý til element\r\n        const container = document.createElement('div');\r\n        const imgcontainer = document.createElement('div');\r\n        const img = document.createElement('img');\r\n        const lengthlabel = document.createElement('span');\r\n        const title = document.createElement('h3');\r\n        const date = document.createElement('p');\r\n\r\n        //Set klasa á element\r\n        container.className = 'video';\r\n        imgcontainer.className = 'video__imgcontainer';\r\n        img.className = 'video__img';\r\n        lengthlabel.className = 'video__imglabel';\r\n        title.className = 'video__title';\r\n        date.className = 'video__date';\r\n\r\n        //Set content í element\r\n        img.src = videoInfo.poster;\r\n        lengthlabel.textContent = getLength(videoInfo.duration);\r\n        title.textContent = videoInfo.title;\r\n        date.textContent = getDurationSinceCreated(videoInfo.created);\r\n\r\n        //Set í viðeigandi container\r\n        imgcontainer.appendChild(img);\r\n        imgcontainer.appendChild(lengthlabel);\r\n        container.appendChild(imgcontainer);\r\n        container.appendChild(title);\r\n        container.appendChild(date);\r\n\r\n        return container;\r\n    }\r\n\r\n    /*\r\n        Býr til streng á formi m:ss úr lengd\r\n        myndbands\r\n    */\r\n    function getLength(length) {\r\n        const min = Math.floor(length/60);\r\n        const secs = length - (60 * min);\r\n        const secsstring = secs < 10 ? '0' + secs : \"\" + secs;\r\n\r\n        console.log(secsstring);\r\n        const durationString = min + ':' + secsstring;\r\n\r\n        return durationString;\r\n    }\r\n\r\n    /*\r\n        Býr til streng á forminu\r\n        'Fyrir N (degi|vikum) síðan'\r\n    */\r\n    function getDurationSinceCreated(date) {\r\n        const timeSince = Date.now() - date;\r\n\r\n        const daysSince = Math.floor(timeSince/(1000 * 60 * 60 * 24));\r\n        if(daysSince < 7) {\r\n            return 'Fyrir ' + daysSince + ' degi síðan';\r\n        } else {\r\n            const weeksSince = Math.floor(daysSince / 7);\r\n            return 'Fyrir ' + weeksSince + ' vikum síðan';\r\n        }\r\n    }\r\n\r\n    /*\r\n        Keyrslufall síðu.\r\n        Setur allt af stað.\r\n    */\r\n    function init() {\r\n        videoscontainer = document.querySelector('main .myndbond');\r\n        console.log(videoscontainer);\r\n\r\n        fetchData();\r\n    }\r\n\r\n\r\n    return {\r\n        init: init\r\n    }\r\n})();\r\n"]}