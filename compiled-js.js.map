{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"compiled-js.js","sourcesContent":["const API_URL = \"./videos.json\";\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    moviedisplayer.init();\n});\n\n\nvar moviedisplayer = (function() {\n    var videoscontainer;\n\n    /*\n        Framkvæmir AJAX fyrirspurn og kallar á fall sem\n        sýnir niðurstöður\n    */\n    function fetchData() {\n        var r = new XMLHttpRequest();\n        //Set upp beiðni\n        r.open('GET', API_URL, true);\n\n        r.onload = function() {\n            if(r.status == 200) {\n            var results = JSON.parse(r.response);\n            displayData(results);\n            } else if (r.status >= 400) {\n            }\n        }\n\n        r.onerror = function() {\n            console.log('Óþekkt villa');\n        }\n\n        r.send();\n    }\n\n    /*\n        Fall sem vinnur úr niðurstöðum úr AJAX request og sýnir\n        á skjá.\n    */\n    function displayData(results) {\n        console.log(results.categories);\n        results.categories.forEach(function(data) {\n            const container = buildContainer(data.title);\n            console.log(data.title);\n            addVideosToCategory(container, data.videos, results.videos);\n\n        });\n    }\n\n    /*\n        Býr til container fyrir category.\n    */\n    function buildContainer(title) {\n        const container = document.createElement('div');\n        const heading = document.createElement('h2');\n        const videolistitemcontainer = document.createElement('div');\n        const hr = document.createElement('hr');\n\n        container.className = 'category';\n        heading.className = 'category__heading';\n        videolistitemcontainer.className = 'category__videolist';\n        heading.textContent = title;\n\n        container.appendChild(heading);\n        container.appendChild(videolistitemcontainer);\n        videoscontainer.appendChild(container);\n        videoscontainer.appendChild(hr);\n\n        return videolistitemcontainer;\n    }\n\n    /*\n        Bætir við myndböndum í viðeigandi category.\n    */\n    function addVideosToCategory(container, videosInCategory, allVideos) {\n        allVideos.forEach(function(video) {\n            if (videosInCategory.includes(video.id)) {\n                container.appendChild(makeVideoListItem(video));\n            }\n        });\n    }\n\n    /*\n        Setur upp HTML fyrir video.\n    */\n    function makeVideoListItem(videoInfo) {\n        //Bý til element\n        const container = document.createElement('div');\n        const imgcontainer = document.createElement('div');\n        const img = document.createElement('img');\n        const lengthlabel = document.createElement('span');\n        const title = document.createElement('h3');\n        const date = document.createElement('p');\n\n        //Set klasa á element\n        container.className = 'video';\n        imgcontainer.className = 'video__imgcontainer';\n        img.className = 'video__img';\n        lengthlabel.className = 'video__imglabel';\n        title.className = 'video__title';\n        date.className = 'video__date';\n\n        //Set content í element\n        img.src = videoInfo.poster;\n        lengthlabel.textContent = getLength(videoInfo.duration);\n        title.textContent = videoInfo.title;\n        date.textContent = getDurationSinceCreated(videoInfo.created);\n        addVideoLink(imgcontainer, videoInfo.id);\n\n        //Set í viðeigandi container\n        imgcontainer.appendChild(img);\n        imgcontainer.appendChild(lengthlabel);\n        container.appendChild(imgcontainer);\n        container.appendChild(title);\n        container.appendChild(date);\n\n        return container;\n    }\n\n    /*\n        Býr til streng á formi m:ss úr lengd\n        myndbands\n    */\n    function getLength(length) {\n        const min = Math.floor(length/60);\n        const secs = length - (60 * min);\n        const secsstring = secs < 10 ? '0' + secs : \"\" + secs;\n\n        console.log(secsstring);\n        const durationString = min + ':' + secsstring;\n\n        return durationString;\n    }\n\n    /*\n        Býr til streng á forminu\n        'Fyrir N (degi|vikum) síðan'\n    */\n    function getDurationSinceCreated(date) {\n        const timeSince = Date.now() - date;\n\n        const daysSince = Math.floor(timeSince/(1000 * 60 * 60 * 24));\n        if(daysSince < 7) {\n            return 'Fyrir ' + daysSince + ' degi síðan';\n        } else {\n            const weeksSince = Math.floor(daysSince / 7);\n            return 'Fyrir ' + weeksSince + ' vikum síðan';\n        }\n    }\n\n    /*\n        Setur eventListener \"click\" á element, beinir vafra á síðu\n        með mynbandi sem valið er\n    */\n    function addVideoLink(element, videoid) {\n        element.addEventListener('click', function() {\n            window.location = '/watch.html?id=' + videoid;\n        });\n    }\n\n\n    /*\n        Keyrslufall síðu.\n        Setur allt af stað.\n    */\n    function init() {\n        videoscontainer = document.querySelector('main .myndbond');\n        console.log(videoscontainer);\n\n        fetchData();\n    }\n\n\n    return {\n        init: init\n    }\n})();\n"]}