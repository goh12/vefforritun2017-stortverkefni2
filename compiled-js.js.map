{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"compiled-js.js","sourcesContent":["const API_URL = './videos.json';\n\nvar moviedisplayer = (function () {\n  var videoscontainer;\n\n  /*\n    Framkvæmir AJAX fyrirspurn og kallar á fall sem\n    sýnir niðurstöður\n  */\n  function fetchData() {\n    const r = new XMLHttpRequest();\n    /* Set upp beiðni */\n    r.open('GET', API_URL, true);\n\n    r.onload = function () {\n      if (r.status == 200) {\n      var results = JSON.parse(r.response);\n      displayData(results);\n      } else if (r.status >= 400) {\n      }\n    }\n\n    r.onerror = function() {\n      console.log('Óþekkt villa');\n    }\n\n    r.send();\n  }\n\n  /*\n    Fall sem vinnur úr niðurstöðum úr AJAX request og sýnir\n    á skjá.\n  */\n  function displayData(results) {\n    console.log(results.categories);\n    results.categories.forEach(function(data) {\n      const container = buildContainer(data.title);\n      console.log(data.title);\n      addVideosToCategory(container, data.videos, results.videos);\n\n    });\n  }\n\n  /*\n    Býr til container fyrir category.\n  */\n  function buildContainer(title) {\n    const container = document.createElement('div');\n    const heading = document.createElement('h2');\n    const videolistitemcontainer = document.createElement('div');\n    const hr = document.createElement('hr');\n\n    container.className = 'category';\n    heading.className = 'category__heading';\n    videolistitemcontainer.className = 'category__videolist';\n    heading.textContent = title;\n\n    container.appendChild(heading);\n    container.appendChild(videolistitemcontainer);\n    videoscontainer.appendChild(container);\n    videoscontainer.appendChild(hr);\n\n    return videolistitemcontainer;\n  }\n\n  /*\n    Bætir við myndböndum í viðeigandi category.\n  */\n  function addVideosToCategory(container, videosInCategory, allVideos) {\n    allVideos.forEach(function(video) {\n      if (videosInCategory.includes(video.id)) {\n        container.appendChild(makeVideoListItem(video));\n      }\n    });\n  }\n\n  /*\n    Setur upp HTML fyrir video.\n  */\n  function makeVideoListItem(videoInfo) {\n    //Bý til element\n    const container = document.createElement('div');\n    const imgcontainer = document.createElement('div');\n    const img = document.createElement('img');\n    const lengthlabel = document.createElement('span');\n    const title = document.createElement('h3');\n    const date = document.createElement('p');\n\n    //Set klasa á element\n    container.className = 'video';\n    imgcontainer.className = 'video__imgcontainer';\n    img.className = 'video__img';\n    lengthlabel.className = 'video__imglabel';\n    title.className = 'video__title';\n    date.className = 'video__date';\n\n    //Set content í element\n    img.src = videoInfo.poster;\n    lengthlabel.textContent = getLength(videoInfo.duration);\n    title.textContent = videoInfo.title;\n    date.textContent = getDurationSinceCreated(videoInfo.created);\n    addVideoLink(imgcontainer, videoInfo.id);\n\n    //Set í viðeigandi container\n    imgcontainer.appendChild(img);\n    imgcontainer.appendChild(lengthlabel);\n    container.appendChild(imgcontainer);\n    container.appendChild(title);\n    container.appendChild(date);\n\n    return container;\n  }\n\n  /*\n    Býr til streng á formi m:ss úr lengd\n    myndbands\n  */\n  function getLength(length) {\n    const min = Math.floor(length/60);\n    const secs = length - (60 * min);\n    const secsstring = secs < 10 ? '0' + secs : \"\" + secs;\n\n    console.log(secsstring);\n    const durationString = min + ':' + secsstring;\n\n    return durationString;\n  }\n\n  /*\n    Býr til streng á forminu\n    'Fyrir N (degi|vikum) síðan'\n  */\n  function getDurationSinceCreated(date) {\n    const timeSince = Date.now() - date;\n\n    const daysSince = Math.floor(timeSince/(1000 * 60 * 60 * 24));\n    if(daysSince < 7) {\n      return 'Fyrir ' + daysSince + ' degi síðan';\n    } else {\n      const weeksSince = Math.floor(daysSince / 7);\n      return 'Fyrir ' + weeksSince + ' vikum síðan';\n    }\n  }\n\n  /*\n    Setur eventListener \"click\" á element, beinir vafra á síðu\n    með mynbandi sem valið er\n  */\n  function addVideoLink(element, videoid) {\n    element.addEventListener('click', function() {\n      window.location = '/watch.html?id=' + videoid;\n    });\n  }\n\n\n  /*\n    Keyrslufall síðu.\n    Setur allt af stað.\n  */\n  function init() {\n    videoscontainer = document.querySelector('main .myndbond');\n    console.log(videoscontainer);\n\n    fetchData();\n  }\n\n\n  return {\n    init: init\n  }\n\n}());\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  moviedisplayer.init();\n});\n"]}